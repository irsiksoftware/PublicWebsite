{"version":3,"file":"js/token-usage-chart.06f9baa9b69a8f7dc2e1.js","mappings":"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","sources":["webpack://testforai/./js/token-usage-chart.js"],"sourcesContent":["async function loadTokenUsageChart() {\r\n    try {\r\n        const response = await fetch('./data/audit-sessions-sample.json');\r\n        if (!response.ok) {\r\n            if (response.status === 404) {\r\n                throw new Error('Resource not found: ./data/audit-sessions-sample.json');\r\n            }\r\n            throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const data = await response.json();\r\n        const sessions = data.sessions || [];\r\n\r\n        const canvas = document.getElementById('token-usage-chart');\r\n        if (!canvas) {\r\n            console.error('Token usage chart canvas not found');\r\n            return;\r\n        }\r\n\r\n        const ctx = canvas.getContext('2d');\r\n\r\n        // Group sessions by date\r\n        const sessionsByDate = {};\r\n        sessions.forEach(session => {\r\n            if (session.timestamp) {\r\n                // Extract date from timestamp (YYYY-MM-DD)\r\n                const date = session.timestamp.split('T')[0];\r\n                if (!sessionsByDate[date]) {\r\n                    sessionsByDate[date] = 0;\r\n                }\r\n                sessionsByDate[date]++;\r\n            }\r\n        });\r\n\r\n        // Sort dates and calculate tokens\r\n        const dates = Object.keys(sessionsByDate).sort();\r\n        const tokenCounts = dates.map(date => sessionsByDate[date] * 70000);\r\n\r\n        // Set canvas size\r\n        const container = canvas.parentElement;\r\n        canvas.width = container.clientWidth;\r\n        canvas.height = 400;\r\n\r\n        // Chart dimensions\r\n        const padding = { top: 40, right: 20, bottom: 80, left: 80 };\r\n        const chartWidth = canvas.width - padding.left - padding.right;\r\n        const chartHeight = canvas.height - padding.top - padding.bottom;\r\n\r\n        // Clear canvas\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n        // Draw title\r\n        ctx.font = 'bold 16px Arial';\r\n        ctx.fillStyle = '#333';\r\n        ctx.textAlign = 'center';\r\n        ctx.fillText('Token Usage Over Time', canvas.width / 2, 20);\r\n\r\n        if (dates.length === 0) {\r\n            ctx.font = '14px Arial';\r\n            ctx.fillStyle = '#666';\r\n            ctx.fillText('No data available', canvas.width / 2, canvas.height / 2);\r\n            return;\r\n        }\r\n\r\n        // Calculate Y-axis range\r\n        const maxTokens = Math.max(...tokenCounts, 1);\r\n        const yAxisMax = Math.ceil(maxTokens / 100000) * 100000; // Round up to nearest 100k\r\n\r\n        // Draw Y-axis\r\n        ctx.strokeStyle = '#666';\r\n        ctx.lineWidth = 2;\r\n        ctx.beginPath();\r\n        ctx.moveTo(padding.left, padding.top);\r\n        ctx.lineTo(padding.left, padding.top + chartHeight);\r\n        ctx.stroke();\r\n\r\n        // Draw X-axis\r\n        ctx.beginPath();\r\n        ctx.moveTo(padding.left, padding.top + chartHeight);\r\n        ctx.lineTo(padding.left + chartWidth, padding.top + chartHeight);\r\n        ctx.stroke();\r\n\r\n        // Draw Y-axis labels and gridlines\r\n        ctx.font = '12px Arial';\r\n        ctx.fillStyle = '#666';\r\n        ctx.textAlign = 'right';\r\n        ctx.strokeStyle = '#e0e0e0';\r\n        ctx.lineWidth = 1;\r\n\r\n        const ySteps = 5;\r\n        for (let i = 0; i <= ySteps; i++) {\r\n            const y = padding.top + chartHeight - (i / ySteps * chartHeight);\r\n            const value = (i / ySteps * yAxisMax);\r\n\r\n            // Format with commas\r\n            const formattedValue = Math.round(value).toLocaleString();\r\n            ctx.fillText(formattedValue, padding.left - 10, y + 4);\r\n\r\n            // Gridline\r\n            if (i > 0) {\r\n                ctx.beginPath();\r\n                ctx.moveTo(padding.left, y);\r\n                ctx.lineTo(padding.left + chartWidth, y);\r\n                ctx.stroke();\r\n            }\r\n        }\r\n\r\n        // Draw line chart\r\n        ctx.strokeStyle = '#2196F3';\r\n        ctx.lineWidth = 3;\r\n        ctx.beginPath();\r\n\r\n        const pointRadius = 4;\r\n        const xStep = chartWidth / (dates.length - 1 || 1);\r\n\r\n        dates.forEach((date, index) => {\r\n            const x = padding.left + (index * xStep);\r\n            const y = padding.top + chartHeight - (tokenCounts[index] / yAxisMax * chartHeight);\r\n\r\n            if (index === 0) {\r\n                ctx.moveTo(x, y);\r\n            } else {\r\n                ctx.lineTo(x, y);\r\n            }\r\n        });\r\n        ctx.stroke();\r\n\r\n        // Draw data points\r\n        dates.forEach((date, index) => {\r\n            const x = padding.left + (index * xStep);\r\n            const y = padding.top + chartHeight - (tokenCounts[index] / yAxisMax * chartHeight);\r\n\r\n            ctx.fillStyle = '#2196F3';\r\n            ctx.beginPath();\r\n            ctx.arc(x, y, pointRadius, 0, 2 * Math.PI);\r\n            ctx.fill();\r\n\r\n            // Draw white border around point\r\n            ctx.strokeStyle = '#fff';\r\n            ctx.lineWidth = 2;\r\n            ctx.stroke();\r\n        });\r\n\r\n        // Draw X-axis labels (dates)\r\n        ctx.font = '12px Arial';\r\n        ctx.fillStyle = '#333';\r\n        ctx.textAlign = 'center';\r\n\r\n        dates.forEach((date, index) => {\r\n            const x = padding.left + (index * xStep);\r\n\r\n            ctx.save();\r\n            ctx.translate(x, padding.top + chartHeight + 10);\r\n            ctx.rotate(-Math.PI / 4);\r\n            ctx.textAlign = 'right';\r\n            ctx.fillText(date, 0, 0);\r\n            ctx.restore();\r\n        });\r\n\r\n        // Y-axis label\r\n        ctx.save();\r\n        ctx.translate(15, canvas.height / 2);\r\n        ctx.rotate(-Math.PI / 2);\r\n        ctx.font = 'bold 14px Arial';\r\n        ctx.fillStyle = '#333';\r\n        ctx.textAlign = 'center';\r\n        ctx.fillText('Token Count', 0, 0);\r\n        ctx.restore();\r\n\r\n        // X-axis label\r\n        ctx.font = 'bold 14px Arial';\r\n        ctx.fillStyle = '#333';\r\n        ctx.textAlign = 'center';\r\n        ctx.fillText('Date', canvas.width / 2, canvas.height - 10);\r\n\r\n    } catch (error) {\r\n        console.error('Failed to load token usage chart:', error);\r\n\r\n        const canvas = document.getElementById('token-usage-chart');\r\n        if (canvas) {\r\n            const container = canvas.parentElement;\r\n            container.innerHTML = '';\r\n\r\n            const errorContainer = document.createElement('div');\r\n            errorContainer.style.cssText = `\r\n                padding: 20px;\r\n                margin: 10px 0;\r\n                background-color: #fff3cd;\r\n                border: 1px solid #ffc107;\r\n                border-radius: 4px;\r\n                color: #856404;\r\n            `;\r\n\r\n            const title = document.createElement('h4');\r\n            title.textContent = 'Data unavailable';\r\n            title.style.cssText = 'margin: 0 0 10px 0; font-weight: bold;';\r\n\r\n            const message = document.createElement('p');\r\n            message.style.cssText = 'margin: 0 0 10px 0;';\r\n\r\n            if (error.message.includes('not found') || error.message.includes('404')) {\r\n                message.textContent = 'The data file \"audit-sessions-sample.json\" is missing. Please run the aggregation tool to generate the required data files.';\r\n            } else {\r\n                message.textContent = `Error loading token usage chart: ${error.message}`;\r\n            }\r\n\r\n            const retryButton = document.createElement('button');\r\n            retryButton.textContent = 'Retry';\r\n            retryButton.style.cssText = `\r\n                padding: 8px 16px;\r\n                background-color: #007bff;\r\n                color: white;\r\n                border: none;\r\n                border-radius: 4px;\r\n                cursor: pointer;\r\n                font-size: 14px;\r\n            `;\r\n            retryButton.addEventListener('click', () => loadTokenUsageChart());\r\n            retryButton.addEventListener('mouseenter', () => {\r\n                retryButton.style.backgroundColor = '#0056b3';\r\n            });\r\n            retryButton.addEventListener('mouseleave', () => {\r\n                retryButton.style.backgroundColor = '#007bff';\r\n            });\r\n\r\n            errorContainer.appendChild(title);\r\n            errorContainer.appendChild(message);\r\n            errorContainer.appendChild(retryButton);\r\n            container.appendChild(errorContainer);\r\n        }\r\n    }\r\n}\r\n\r\n// Handle window resize\r\nlet resizeTimeout;\r\nwindow.addEventListener('resize', () => {\r\n    clearTimeout(resizeTimeout);\r\n    resizeTimeout = setTimeout(() => {\r\n        loadTokenUsageChart();\r\n    }, 250);\r\n});\r\n\r\nif (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', loadTokenUsageChart);\r\n} else {\r\n    loadTokenUsageChart();\r\n}\r\n"],"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_invoke","enumerable","configurable","writable","_toConsumableArray","Array","isArray","_arrayLikeToArray","_arrayWithoutHoles","from","_iterableToArray","toString","slice","constructor","name","test","_unsupportedIterableToArray","_nonIterableSpread","asyncGeneratorStep","Promise","resolve","then","loadTokenUsageChart","_loadTokenUsageChart","apply","arguments","_callee","response","data","sessions","canvas","ctx","sessionsByDate","dates","tokenCounts","container","padding","chartWidth","chartHeight","maxTokens","yAxisMax","formattedValue","xStep","_canvas","_container","errorContainer","title","message","retryButton","_t","_context","fetch","ok","status","Error","concat","json","document","getElementById","getContext","forEach","session","timestamp","date","split","keys","sort","map","parentElement","width","clientWidth","height","top","right","bottom","left","clearRect","font","fillStyle","textAlign","fillText","Math","max","ceil","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","round","toLocaleString","index","x","arc","PI","fill","save","translate","rotate","restore","innerHTML","createElement","style","cssText","textContent","includes","addEventListener","backgroundColor","appendChild","_next","_throw","resizeTimeout","window","clearTimeout","setTimeout","readyState"],"sourceRoot":""}